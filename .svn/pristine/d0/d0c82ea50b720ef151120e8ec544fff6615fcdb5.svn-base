<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@taglib prefix="t" tagdir="/WEB-INF/tags"%>

<t:main>

	<script src="${pageContext.request.contextPath}/resources/js/moment.js" type="text/javascript"></script>
	<script src="${pageContext.request.contextPath}/resources/js/moment-fr.js" type="text/javascript"></script>
	<script src="${pageContext.request.contextPath}/resources/js/bootstrap-combobox.js" type="text/javascript"></script>
	<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/bootstrap-combobox.css" type="text/css">

	<script type="text/javascript">	
	$(function() {
		$(document).ready(function() {
			$('.combobox').combobox();
		});		
	});
	</script>
	
	<div class="row">
		<div class="col-sm-10 col-md-10 col-lg-10">
			<h1>Gestion des membres</h1><br>
				<c:if test="${ !empty errorMsg }">
            		<div class="alert alert-danger" role="alert">${errorMsg}</div>       
            	</c:if>		
				<div class="list-group">
	  				<div class="list-group-item active"><b><label style="font-size:24px"><c:out value="${sessionName}"/> / <c:out value="${teamName}"/> / Membres</label></b></div>
			  			<div class="list-group-item" style="height:70px">
				  			<span class="label label-primary label-as-badge pull-right" style="margin-left:5px;font-size:15px">&nbsp;Chef d'équipe&nbsp;</span><b>
				  			<label style="font-size:20px">&nbsp;<c:out value="${members.get(0).getFirstName()} ${members.get(0).getLastName()}"/></label></b>
			  			</div>
			  			<c:forEach items="${members}" var="member" begin="1">
			  				<div class="list-group-item" style="height: 70px">
			  				<form method="post" action="ManageMembers">
				  				<button class="btn btn-warning pull-right" style="margin-left:25px" type="submit" name="idMemberForDelete" value="${member.getId()}">
				 					 <span class="glyphicon glyphicon-remove" aria-hidden="true" style="font-size:15px"></span>
								</button>
							</form>	
				  			<span class="label label-success label-as-badge pull-right" style="margin-left:5px;font-size:15px">&nbsp;Membre&nbsp;</span><b>
				  			<label style="font-size:20px">&nbsp;<c:out value="${member.getFirstName()} ${member.getLastName()}"/></label></b>
			  				</div>	
			  			</c:forEach>
				</div><br>	
			<form method="post" action="ManageMembers">
				<label style="font-size:20px">Sélectionnez un étudiant à ajouter</label>
				<div class="form-group">
					<select class="combobox input-large form-control" name="idMember" required>
						<option></option>
						<c:forEach items="${students}" var="student">
							<option value="${student.getId()}"><c:out value="${student.getLastName()} ${student.getFirstName()}"/></option>
						</c:forEach>
					</select>
				</div>
				<button class="btn btn-lg btn-primary pull-left" name="idTeam" value="${idTeam}" type="submit">Ajouter ce membre</button>
			</form><br><br><br><br>
			<form method="get" action="ManageTeams">
				<button class="btn btn-lg btn-primary pull-left" name="idSession" value="${idSession}" type="submit">Revenir à la gestion des équipes</button>
			</form><br><br><br>											
		</div>
	</div>
</t:main>